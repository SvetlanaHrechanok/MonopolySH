<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/css.css">
	<title>Монополия</title>
</head>
<script type="text/javascript">
	function drowbox(top,left,w,h,id){
		var inside = '';

		if((id%10)!=2 && (id%10)!=8 && (id%10)!=0){

			var cost = id*4*50;
			var pay = id*50;

			if((id%10)==5){
				//цена паровозиков
				var cost = 400;
				var pay = 200;
			}

			var inside = '<span id="cost'+id+'">'+cost+'</span><br><span id="pay'+id+'">'+pay+'</span>';

		}else{
			switch(id){
				case 0:
					inside = 'Старт';
				break;
				case 10:
					inside = 'Тюрьма';
				break;
				case 20:
					inside = 'Свободно';
				break;
				case 30:
					inside = 'Иди в тюрьму';
				break;
				default:
					if(id%10==8){
						inside = 'Тени карту!';
					}else{
						var bonus = 500;
						inside = 'Бонус <span id="bonus'+id+'">'+bonus+'</span>';
					}
				break;
			}
		}


		var string = '<div style="top: '+top+'px; left: '+left+'px; width: '+w+'px; height: '+h+'px; background: #bbb; border: 2px solid black; position: absolute;" id="'+id+'">'+inside+'</div>';

		document.writeln(string);
	}



</script>
<body>

	<div class="field">
		<script>
			drowbox(0,0,100,100,0); //блок старт
			var leftn=102;
			for (var i=1;i<=9;i++){
				drowbox(0,leftn,50,100,i);
				leftn+=50;
			}

			drowbox(0,550,100,100,10); //тюрьма

			var topn=102;
			for (var i=11;i<=19;i++){
				drowbox(topn,550,100,50,i);
				topn+=50;
			}

			drowbox(554,550,100,100,20); //free

			var leftn=498;
			for (var i=21;i<=29;i++){
				drowbox(554,leftn,50,100,i);
				leftn-=50;
			}

			drowbox(554,0,100,100,30); //идти в тюрьму

			var topn=502;
			for (var i=31;i<=39;i++){
				drowbox(topn,0,100,50,i);
				topn-=50;
			}
		</script>
	</div>

<div class="playplace">

	<div id="usertable">
		<input type="number" id="funds">
		<input type="text" id="name">
		<button id="button">Добавить игрока</button>

	<script>
		var returnst="";

		for (var i = 0,key; i < localStorage.length; i++) {
			key =localStorage.key(i);
			var returnObj = JSON.parse(localStorage.getItem(key));

			returnst+='<hr>'
			+returnObj.name+'; $ '
			+returnObj.funds+' / '
			+returnObj.place+' ';
		}

		document.writeln(returnst);
	</script>

	</div>
	<br>
	<div>
		<div id="cub">
			<img id="imgcub" src="img/cub1.png" alt="кубик1" style="min-width: 100%; min-height: 100%; max-width: 100%; max-height: 100%;">
			<br>
			<button id="playcub" onclick="changeimg()" style="margin-top: 10px;">Брось кубик</button>
		</div>
		
		<script>
			var check = 0;
			function changeimggo(){
				var a = Math.floor(Math.random()*5)+1;
				switch(a)
				{
					case 1:
						document.getElementById('imgcub').src = "img/cub1.png";
					break;
					case 2:
						document.getElementById('imgcub').src = "img/cub2.png";
					break;
					case 3:
						document.getElementById('imgcub').src = "img/cub3.png";
					break;
					case 4:
						document.getElementById('imgcub').src = "img/cub4.png";
					break;
					case 5:
						document.getElementById('imgcub').src = "img/cub5.png";
					break;
					case 6:
						document.getElementById('imgcub').src = "img/cub6.png";
					break;
				}
				time=setTimeout(changeimggo,100);
			}

			function changeimg()
			{
				if(check==0){
					changeimggo();
					check=1;
				}else{
					if(check==1){
						clearTimeout(time);
						check=0;
					}
				}
			}
			
		</script>
	</div>
</div>

<script>
	var element = document.getElementById('button');
	element.onclick =function(){
		var funds = document.getElementById('funds').value;
		var name = document.getElementById('name').value;
		if(name=="" || funds==""){
			alert("что-то не ввлели");
		}else{
			var myItem = {}
				myItem.name = name;
				myItem.funds = funds;
				myItem.place = 0;
			var serialObj = JSON.stringify(myItem);
			localStorage.setItem(name,serialObj);
		}
	}
</script>

	
</body>
</html>